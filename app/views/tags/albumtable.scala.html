@(albums:List[(models.Album,models.Artist)])

<script src="@asset("public/javascripts/albumtable.js")" type="text/javascript" charset="utf-8"></script>
<script src="@asset("public/javascripts/jquery.bt.min.js")" type="text/javascript" charset="utf-8"></script>
<script src="@asset("public/javascripts/jquery.datatables.js")" type="text/javascript" charset="utf-8"></script>
<script>
    (function($, global) {
      $.bt.options.closeWhenOthersOpen = true;
      $(document).ready(function(){
      });
    })(this.jQuery, this)
</script>
<link rel="stylesheet" type="text/css" media="screen" href="@asset("public/stylesheets/south-street/datatables.css")" />
<link rel="stylesheet" type="text/css" media="screen" href="@asset("public/stylesheets/south-street/jquery.bt.css")" />

<div id="voteInfo" class="info">One vote added!</div>
<table id="albumList">
    <thead>
        <tr>
            <th>Album</th>
            <th>Artist</th>
            <th>Cover</th>
            <th>Release date</th>
            <th>Genre</th>
            <th>Number of votes</th>
            @if(session.get("username").equals("admin")){
                <th>Manage</th>
            }
        </tr>
    </thead>

    @albums.map { album =>
        <tr id="album-${album.id}">
            <td>@album._1.name</td>
            <td>@album._2.name</td>
            <td>
                @if(album._1.hasCover){
                    <span class="cover"><a href="#">Show cover</a></span>
                }
            </td>
            <td>@album._1.map(_.releaseDate.format("yyyy-MM-dd"))</td>
            <td>@album._1.genre</td>
            <td>
                <span id="nbVotes@album._1.id">@album.nbVotes</span>
                <a id="@album._1.id-clickVote" class="voteLink" href="#">Vote for it!</a>
            </td>
            @if(session.get("username").equals("admin")){
                <td><a href="@action(controllers.Admin.form(album.id()))">Update</a>&nbsp;<a href="@action(controllers.Admin.delete(album.id()))">Delete</a></td>
            }
        </tr>
    }
</table>
<div id="tips">Tip : Mouse hover an album to see its cover</div>
