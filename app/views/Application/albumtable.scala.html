@(entries:List[(models.Album,models.Artist)])

@import controllers._

<script src="@asset("public/javascripts/albumtable.js")" type="text/javascript" charset="utf-8"></script>
<script src="@asset("public/javascripts/jquery.bt.min.js")" type="text/javascript" charset="utf-8"></script>
<script src="@asset("public/javascripts/jquery.datatables.js")" type="text/javascript" charset="utf-8"></script>
<script>
    (function($, global) {
      $.bt.options.closeWhenOthersOpen = true;
      $(document).ready(function(){
      });
    })(this.jQuery, this)
</script>
<link rel="stylesheet" type="text/css" media="screen" href="@asset("public/stylesheets/south-street/datatables.css")" />
<link rel="stylesheet" type="text/css" media="screen" href="@asset("public/stylesheets/south-street/jquery.bt.css")" />

<div id="voteInfo" class="info">One vote added!</div>
<table id="albumList">
    <thead>
        <tr>
            <th>Album</th>
            <th>Artist</th>
            <th>Cover</th>
            <th>Release date</th>
            <th>Genre</th>
            <th>Number of votes</th>
            @if(Application.session.get("username").equals("admin")){
                <th>Manage</th>
            }
        </tr>
    </thead>

    @(entries.map { entry => val album = entry._1; val artist = entry._2
        <tr id="album-@entry._1.id">
            <td>@album.name</td>
            <td>@artist.name</td>
            <td>
                @if(entry._1.hasCover){
                    <span class="cover"><a href="#">Show cover</a></span>
                }
            </td>
            <td>@Option(entry._1).map(_.releaseDate.format("yyyy-MM-dd"))</td>
            <td>@entry._1.genre</td>
            <td>
                <span id="nbVotes@entry._1.id">@entry._1.nbVotes</span>
                <a id="@entry._1.id-clickVote" class="voteLink" href="#">Vote for it!</a>
            </td>
            @if(Application.session.get("username").equals("admin")){
                <td><a href="@action(Admin.form(entry.id()))">Update</a>&nbsp;<a href="@action(Admin.delete(entry_1.id()))">Delete</a></td>
            }
        </tr>
    })
</table>
<div id="tips">Tip : Mouse hover an album to see its cover</div>
